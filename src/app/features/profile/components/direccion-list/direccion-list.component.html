<div class="direccion-list-container">
  <h2>Mis Direcciones de Envío</h2>

  <button (click)="agregarNuevaDireccion()" class="btn btn-primary mb-3">
    Agregar Nueva Dirección
  </button>

  <div *ngIf="isLoading" class="loading-indicator">
    Cargando direcciones...
  </div>

  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <div *ngIf="!isLoading && !error && direcciones.length === 0" class="alert alert-info">
    No tiene direcciones guardadas. ¡Agregue una!
  </div>

  <ul *ngIf="!isLoading && !error && direcciones.length > 0" class="list-group">
    <li *ngFor="let dir of direcciones"
        class="list-group-item d-flex justify-content-between align-items-center"
        [class.border-primary]="dir.predeterminada">

      <div>
        <p class="mb-1">
          <strong>{{ dir.calle }}</strong>
          <span *ngIf="dir.predeterminada" class="badge bg-primary ms-2">Predeterminada</span>
        </p>
        <small>{{ dir.ciudad }}, {{ dir.cp }}, {{ dir.pais }}</small>
      </div>

      <div class="direccion-actions">
        <button (click)="marcarComoPredeterminada(dir)"
                *ngIf="!dir.predeterminada"
                class="btn btn-sm btn-outline-success me-2"
                title="Marcar como predeterminada">
          Marcar Predeterminada
        </button>
        <button (click)="editarDireccion(dir.id)" class="btn btn-sm btn-outline-primary me-2" title="Editar">
          Editar
        </button>
        <button (click)="eliminarDireccion(dir.id)" class="btn btn-sm btn-outline-danger" title="Eliminar">
          Eliminar
        </button>
      </div>
    </li>
  </ul>
</div>
